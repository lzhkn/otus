README.MD

bash-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –µ–∂–µ—á–∞—Å–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ email –æ—Ç—á—ë—Ç –æ —Ä–∞–±–æ—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ 

–û–ø–∏—Å–∞–Ω–∏–µ/–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è: 
üéØ–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å? 

–ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è CRON, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ —á–∞—Å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –ø–æ—á—Ç—É. 

–û—Ç—á—ë—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: IP-–∞–¥—Ä–µ—Å–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞); 

–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ URL —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞);

–û—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞); 

HTTP-–∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞). 

–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ø–∏–π, –¥–æ –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –í –ø–∏—Å—å–º–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ–ø–∏—Å–∞–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω.



–ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ–∫—Ç–∞:

CRON (1 —Ä–∞–∑ –≤ —á–∞—Å)
   ‚Üì
bash-—Å–∫—Ä–∏–ø—Ç
   ‚Üì
–ø–∞—Ä—Å–∏–Ω–≥ nginx –ª–æ–≥–æ–≤ (—Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏)
   ‚Üì
—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞
   ‚Üì
mail (s-nail)
   ‚Üì
postfix (local delivery)


OS - Rocky linux 9.4
Web server - Nginx (for zabbix)
mail -  postfix / s-nail

/web_hourly_report.sh

–î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

sudo chmod +x ~/web_hourly_report.sh


–î–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:

sudo crontab -e
0 * * * * ~/web_hourly_report.sh



–¢–µ—Å—Ç–∏–º —Å–∫—Ä–∏–ø—Ç, —Å–º–æ—Ç—Ä–∏–º –ø–æ—á—Ç—É:

[root@zabbix lzhkn]# ./web_hourly_report.sh 
[root@zabbix lzhkn]# mail
s-nail version v14.9.22.  Type `?' for help
/var/spool/mail/root: 3 messages 2 new 3 unread
 U  1 lzhkn@zabbix.localdo  2026-01-22 20:52   16/498   "test                                                                                                                                                                                                                                                                "
‚ñ∏N  2 root                  2026-01-22 21:00   64/2620  "Web report [zabbix] 2026-01-22 20:00:26 ‚Äî 2026-01-22 21:00:26                                                                                                                                                                                                       "
 N  3 root                  2026-01-22 21:17   62/2522  "Web report [zabbix] 2026-01-22 20:17:08 ‚Äî 2026-01-22 21:17:08                                                                                                                                                                                                       "
& 3
[-- Message  3 -- 62 lines, 2522 bytes --]:
Date: Thu, 22 Jan 2026 21:17:09 +0300
To: root@zabbix.localdomain
Subject: Web report [zabbix] 2026-01-22 20:17:08 ‚Äî 2026-01-22 21:17:08
Message-Id: <20260122181709.23FC020692F5@zabbix.localdomain>
From: root <root@zabbix.localdomain>

–û—Ç—á—ë—Ç –æ —Ä–∞–±–æ—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
–•–æ—Å—Ç: zabbix
–ü–µ—Ä–∏–æ–¥: 2026-01-22 20:17:08 ‚Äî 2026-01-22 21:17:08

=================================
TOP IP-–∞–¥—Ä–µ—Å–∞
=================================
     59 192.168.0.220
      7 192.168.0.151

=================================
TOP URL
=================================
     14 /zabbix.php?action=notifications.get&output=ajax
     12 /zabbix.php?action=widget.svggraph.view
      6 /zabbix.php?action=widget.problems.view
      5 /jsrpc.php?output=json-rpc
      3 /zabbix.php?action=widget.tophosts.view
      3 /zabbix.php?action=widget.systeminfo.view
      3 /zabbix.php?action=widget.problemsbysv.view
      3 /zabbix.php?action=widget.item.view
      3 /zabbix.php?action=widget.hostavail.view
      3 /zabbix.php?action=widget.clock.view

=================================
HTTP-–∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
=================================
     62 200
      4 304

=================================
–û—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
=================================

0
